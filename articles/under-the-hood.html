<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>eulerr under the hood ‚Ä¢ eulerr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="eulerr under the hood">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eulerr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">7.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/gallery.html">A Gallery of Euler and Venn Diagrams</a></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introducing eulerr</a></li>
    <li><a class="dropdown-item" href="../articles/loss-functions.html">Loss Functions</a></li>
    <li><a class="dropdown-item" href="../articles/under-the-hood.html">eulerr under the hood</a></li>
    <li><a class="dropdown-item" href="../articles/venn-diagrams.html">Venn diagrams with eulerr</a></li>
    <li><a class="dropdown-item" href="../articles/visualization.html">Visualizing Euler diagrams with eulerr</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jolars/eulerr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>eulerr under the hood</h1>
                        <h4 data-toc-skip class="author">Johan
Larsson</h4>
            
            <h4 data-toc-skip class="date">2025-08-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jolars/eulerr/blob/main/vignettes/under-the-hood.Rmd" class="external-link"><code>vignettes/under-the-hood.Rmd</code></a></small>
      <div class="d-none name"><code>under-the-hood.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><strong>eulerr</strong> relies on an extensive machinery to turn user
input into a pretty Euler diagram. Little of this requires any tinkering
from the user. To make that happen, however, <strong>eulerr</strong>
needs to make several well-formed decisions about the design of the
diagram on behalf of the user, which is not a trivial task.</p>
<p>This document outlines the implementation of <strong>eulerr</strong>
from input to output. It is designed to be an evolving documentation on
the innards of the program.</p>
</div>
<div class="section level2">
<h2 id="input">Input<a class="anchor" aria-label="anchor" href="#input"></a>
</h2>
<p>Euler diagrams present relationships between sets, wherefore the data
must describe these relationships, either directly or indirectly.
<strong>eulerr</strong> allows several alternatives for this data,
namely,</p>
<ul>
<li><p>intersections and relative complements
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>\</mo><mi>B</mi><mo>=</mo><mn>3</mn><mspace width="1.0em"></mspace><mi>B</mi><mo>\</mo><mi>A</mi><mo>=</mo><mn>2</mn><mspace width="1.0em"></mspace><mi>A</mi><mo>‚à©</mo><mi>B</mi><mo>=</mo><mn>1</mn><mo>,</mo></mrow><annotation encoding="application/x-tex">
A \setminus B = 3 \quad B \setminus A = 2 \quad A \cap B=1,
</annotation></semantics></math></p></li>
<li><p>unions and identities
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mn>4</mn><mspace width="1.0em"></mspace><mi>B</mi><mo>=</mo><mn>3</mn><mspace width="1.0em"></mspace><mi>A</mi><mo>‚à©</mo><mi>B</mi><mo>=</mo><mn>1</mn><mo>,</mo></mrow><annotation encoding="application/x-tex">
A=4 \quad B=3 \quad A \cap B=1,
</annotation></semantics></math></p></li>
<li><p>a matrix of binary (or boolean) indices,
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mi>ùêÄ</mi></mtd><mtd columnalign="center" style="text-align: center"><mi>ùêÅ</mi></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn><mo>,</mo></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
  \mathbf{A} &amp; \mathbf{B}\\
  1          &amp; 0     \\
  1          &amp; 0     \\
  1          &amp; 0     \\
  1          &amp; 1     \\
  0          &amp; 1     \\
  0          &amp; 1,
\end{bmatrix}
</annotation></semantics></math></p></li>
<li><p>a list of sample spaces
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtable><mtr><mtd columnalign="left" style="text-align: left"><mi>A</mi><mo>=</mo><mo stretchy="false" form="prefix">{</mo><mi>a</mi><mo>,</mo><mspace width="0.167em"></mspace><mi>b</mi><mo>,</mo><mspace width="0.167em"></mspace><mi>c</mi><mo>,</mo><mspace width="0.167em"></mspace><mi>d</mi><mo stretchy="false" form="postfix">}</mo></mtd></mtr><mtr><mtd columnalign="left" style="text-align: left"><mi>B</mi><mo>=</mo><mo stretchy="false" form="prefix">{</mo><mi>a</mi><mo>,</mo><mspace width="0.167em"></mspace><mi>e</mi><mo>,</mo><mspace width="0.167em"></mspace><mi>f</mi><mo>,</mo><mo stretchy="false" form="postfix">}</mo></mtd></mtr></mtable><mo>,</mo></mrow><annotation encoding="application/x-tex">
\begin{array}{l}
    A = \{a,\,b,\,c,\,d\}\\
    B = \{a,\,e,\,f,\}
  \end{array},
</annotation></semantics></math></p></li>
<li>
<p>or a two- or three-way table</p>
<table class="table">
<thead><tr class="header">
<th></th>
<th><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math></th>
<th align="center"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>A</mi><mi>ùñº</mi></msup><annotation encoding="application/x-tex">A^\mathsf{c}</annotation></semantics></math></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>B</mi><annotation encoding="application/x-tex">B</annotation></semantics></math></td>
<td>1</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>A</mi><mi>ùñº</mi></msup><annotation encoding="application/x-tex">A^\mathsf{c}</annotation></semantics></math></td>
<td>3</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>As an additional feature for the matrix form, the user may supply a
factor variable with which to split the data set before fitting the
diagram, which sometimes improves diagrams where the set relationships
vary across categories.</p>
<p>Whichever type of input is provided, <strong>eulerr</strong> will
translate it to the first and second types, <em>intersections and
relative complements</em> and <em>unions and identities</em>, which will
be used in the steps to come.</p>
<p>The Euler diagram is then fit in two steps: first, an initial layout
is formed with circles using only the sets‚Äô pairwise relationships.
Second, this layout is fine-tuned taking all
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>N</mi></msup><mo>‚àí</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^N-1</annotation></semantics></math>
intersections into consideration.</p>
</div>
<div class="section level2">
<h2 id="initial-layout">Initial layout<a class="anchor" aria-label="anchor" href="#initial-layout"></a>
</h2>
<p>For our initial layout, we adopt a constrained version of
multi-dimensional scaling (MDS) that has been adapted from
<strong>venn.js</strong> <span class="citation">(Frederickson
2016)</span>, which in turn is a modification of an algorithm used in
<strong>venneuler</strong> <span class="citation">(Wilkinson
2012)</span>. In it, we consider only the pairwise intersections between
sets, attempting to position their respective shapes so as to minimize
the difference between the separation between their centers required to
obtain an optimal overlap and the actual overlap of the shapes in the
diagram.</p>
<p>This problem is unfortunately intractable for ellipses, being that
there is an infinite number of ways by which we can position two
ellipses to obtain a given overlap. Thus, we restrict ourselves to
circles in our initial layout, for which we can use the circle‚Äìcircle
overlap formula to numerically find the required distance,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>d</mi><annotation encoding="application/x-tex">d</annotation></semantics></math>,
for each pairwise relationship.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>O</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo></mtd><mtd columnalign="left" style="text-align: left"><msubsup><mi>r</mi><mi>i</mi><mn>2</mn></msubsup><mo>arccos</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mrow><msubsup><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>r</mi><mi>i</mi><mn>2</mn></msubsup><mo>‚àí</mo><msubsup><mi>r</mi><mi>j</mi><mn>2</mn></msubsup></mrow><mrow><mn>2</mn><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>r</mi><mi>i</mi></msub></mrow></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><msubsup><mi>r</mi><mi>j</mi><mn>2</mn></msubsup><mo>arccos</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mrow><msubsup><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>r</mi><mi>j</mi><mn>2</mn></msubsup><mo>‚àí</mo><msubsup><mi>r</mi><mi>i</mi><mn>2</mn></msubsup></mrow><mrow><mn>2</mn><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>r</mi><mi>j</mi></msub></mrow></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>‚àí</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"></mtd><mtd columnalign="left" style="text-align: left"><mspace width="1.0em"></mspace><mfrac><mn>1</mn><mn>2</mn></mfrac><msqrt><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mo>‚àí</mo><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>+</mo><msub><mi>r</mi><mi>i</mi></msub><mo>+</mo><msub><mi>r</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>+</mo><msub><mi>r</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>r</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>‚àí</mo><msub><mi>r</mi><mi>i</mi></msub><mo>+</mo><msub><mi>r</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>+</mo><msub><mi>r</mi><mi>i</mi></msub><mo>+</mo><msub><mi>r</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msqrt><mo>,</mo></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
O_{ij} = &amp; r_i^2\arccos\left(\frac{d_{ij}^2 + r_i^2 - r_j^2}{2d_{ij}r_i}\right) +
r_j^2\arccos\left(\frac{d_{ij}^2 + r_j^2 - r_i^2}{2d_{ij}r_j}\right) -\\
&amp;\quad \frac{1}{2}\sqrt{(-d_{ij} + r_i + r_j)(d_{ij} + r_i - r_j)(d_{ij} - r_i + r_j)(d_{ij} + r_i + r_j)},
\end{aligned}
</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>r</mi><mi>i</mi></msub><annotation encoding="application/x-tex">r_i</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>r</mi><mi>j</mi></msub><annotation encoding="application/x-tex">r_j</annotation></semantics></math>
are the radii of the circles representing the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math><sup>th</sup>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math><sup>th</sup>
sets respectively,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>O</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">O_{ij}</annotation></semantics></math>
their overlap, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">d_{ij}</annotation></semantics></math>
their separation.</p>
<div class="figure">
<img src="under-the-hood_files/figure-html/unnamed-chunk-1-1.png" alt="The circle--circle overlap is computed as a function of the discs' separation ($d_{ij}$), radii ($r_i,r_j$), and area of overlap ($O_{ij}$)." width="288"><p class="caption">
The circle‚Äìcircle overlap is computed as a function of the discs‚Äô
separation
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">d_{ij}</annotation></semantics></math>),
radii
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>i</mi></msub><mo>,</mo><msub><mi>r</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">r_i,r_j</annotation></semantics></math>),
and area of overlap
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>O</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">O_{ij}</annotation></semantics></math>).
</p>
</div>
<p>Setting
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>i</mi></msub><mo>=</mo><msqrt><mrow><msub><mi>F</mi><mi>i</mi></msub><mi>/</mi><mi>œÄ</mi></mrow></msqrt></mrow><annotation encoding="application/x-tex">r_i = \sqrt{F_i/\pi}</annotation></semantics></math>,
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>F</mi><mi>i</mi></msub><annotation encoding="application/x-tex">F_i</annotation></semantics></math>
is the size of the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math><sup>th</sup>
set, we are able to obtain
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>d</mi><annotation encoding="application/x-tex">d</annotation></semantics></math>
numerically using the squared difference between
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>O</mi><annotation encoding="application/x-tex">O</annotation></semantics></math>
and the desired overlap as loss function,</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>‚Ñí</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>O</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>‚àí</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>F</mi><mi>i</mi></msub><mo>‚à©</mo><msub><mi>F</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>,</mo><mspace width="1.0em"></mspace><mrow><mtext mathvariant="normal">for </mtext><mspace width="0.333em"></mspace></mrow><mi>i</mi><mo>&lt;</mo><mi>j</mi><mo>‚â§</mo><mi>n</mi><mo>,</mo></mrow><annotation encoding="application/x-tex">
\mathcal{L}(d_{ij}) = \left(O_{ij} - (F_i \cap F_j)  \right)^2, \quad \text{for } i &lt;
j \leq n,
</annotation></semantics></math></p>
<p>which we optimize using <code><a href="https://rdrr.io/r/stats/optimize.html" class="external-link">optimize()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;According to the documentation, &lt;code&gt;&lt;a href="https://rdrr.io/r/stats/optimize.html" class="external-link"&gt;optimize()&lt;/a&gt;&lt;/code&gt;
consists of a ‚Äúcombination of golden section search and successive
parabolic interpolation.‚Äù from &lt;strong&gt;stats&lt;/strong&gt;.&lt;/p&gt;'><sup>1</sup></a></p>
<p>For a two-set combination, this is all we need to plot an exact
diagram, given that we now have the two circles‚Äô radii and separation
and may place the circles arbitrarily as long as their separation,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>d</mi><annotation encoding="application/x-tex">d</annotation></semantics></math>,
remains the same. This is not, however, the case with more than two
sets.</p>
<p>With three or more sets, the circles need to be arranged so that they
interfere minimally with one another. In some cases, the set
configuration allows this to be accomplished flawlessly, but often,
compromises must me made. As is often the case in this context, this
turns out to be another optimization problem. It can be tackled in many
ways; <strong>eulerr</strong>‚Äôs approach is based on a method developed
by <span class="citation">Frederickson (2015)</span>, which the author
describes as constrained multi-dimensional scaling.</p>
<p>The algorithm tries to position the circles so that the separation
between each pair of circles matches the separation required from the
separation equation. If the two sets are disjoint, however, the
algorithm is indifferent to the relative locations of those circles as
long as they do not intersect. The equivalent applies to subset sets: as
long as the circle representing the smaller set remains within the
larger circle, their locations are free to vary. In all other cases, the
loss function is the residual sums of squares of the optimal separation
of circles,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>d</mi><annotation encoding="application/x-tex">d</annotation></semantics></math>,
that we found in the overlap equation, and the actual distance in the
layout we are currently exploring.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>‚Ñí</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>h</mi><mo>,</mo><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mo>‚Ñì</mo><munder><mo>‚àë</mo><mrow><mn>1</mn><mo>‚â§</mo><mi>i</mi><mo>&lt;</mo><mi>j</mi><mo>‚â§</mo><mi>N</mi></mrow></munder><mrow><mo stretchy="true" form="prefix">{</mo><mtable><mtr><mtd columnalign="left" style="text-align: left"><mn>0</mn></mtd><mtd columnalign="left" style="text-align: left"><msub><mi>F</mi><mi>i</mi></msub><mo>‚à©</mo><msub><mi>F</mi><mi>j</mi></msub><mo>=</mo><mi>‚àÖ</mi><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> and </mtext><mspace width="0.333em"></mspace></mrow><msub><mi>O</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>0</mn></mtd></mtr><mtr><mtd columnalign="left" style="text-align: left"><mn>0</mn></mtd><mtd columnalign="left" style="text-align: left"><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>F</mi><mi>i</mi></msub><mo>‚äÜ</mo><msub><mi>F</mi><mi>j</mi></msub><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> or </mtext><mspace width="0.333em"></mspace></mrow><msub><mi>F</mi><mi>i</mi></msub><mo>‚äá</mo><msub><mi>F</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> and </mtext><mspace width="0.333em"></mspace></mrow><msub><mi>O</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>0</mn></mtd></mtr><mtr><mtd columnalign="left" style="text-align: left"><msup><mrow><mo stretchy="true" form="prefix">(</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>h</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>+</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>k</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>k</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>‚àí</mo><msubsup><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mtd><mtd columnalign="left" style="text-align: left"><mtext mathvariant="normal">otherwise</mtext></mtd></mtr><mtr><mtd columnalign="left" style="text-align: left"></mtd></mtr></mtable></mrow><mi>.</mi></mrow><annotation encoding="application/x-tex">
\mathcal{L}(h,k) = \displaystyle \ell{\sum_{1\leq i&lt;j\leq N}}
\begin{cases}
0 &amp; F_i \cap F_j = \emptyset \text{ and } O_{ij} = 0\\
0 &amp; (F_i \subseteq F_j \text{ or } F_i \supseteq F_j) \text{ and } O_{ij}=0\\
\left(\left(h_i-h_j\right)^2+\left(k_i-k_j\right)^2-d_{ij}^2\right)^2  &amp; \text{otherwise} \\
\end{cases}.
</annotation></semantics></math></p>
<p>The analytical gradient is retrieved as usual by taking the
derivative of the loss function,</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>‚àá</mi><mo accent="true">‚Üí</mo></mover><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><munderover><mo>‚àë</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mrow><mo stretchy="true" form="prefix">{</mo><mtable><mtr><mtd columnalign="left" style="text-align: left"><mover><mn>0</mn><mo accent="true">‚Üí</mo></mover></mtd><mtd columnalign="left" style="text-align: left"><msub><mi>F</mi><mi>i</mi></msub><mo>‚à©</mo><msub><mi>F</mi><mi>j</mi></msub><mo>=</mo><mi>‚àÖ</mi><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> and </mtext><mspace width="0.333em"></mspace></mrow><msub><mi>O</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>0</mn></mtd></mtr><mtr><mtd columnalign="left" style="text-align: left"><mover><mn>0</mn><mo accent="true">‚Üí</mo></mover></mtd><mtd columnalign="left" style="text-align: left"><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>F</mi><mi>i</mi></msub><mo>‚äÜ</mo><msub><mi>F</mi><mi>j</mi></msub><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> or </mtext><mspace width="0.333em"></mspace></mrow><msub><mi>F</mi><mi>i</mi></msub><mo>‚äá</mo><msub><mi>F</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> and </mtext><mspace width="0.333em"></mspace></mrow><msub><mi>O</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>0</mn></mtd></mtr><mtr><mtd columnalign="left" style="text-align: left"><mn>4</mn><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>h</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>h</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>h</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>+</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>k</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>k</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>‚àí</mo><msubsup><mi>d</mi><mrow><mi>i</mi><mi>j</mi></mrow><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow></mtd><mtd columnalign="left" style="text-align: left"><mtext mathvariant="normal">otherwise</mtext><mo>,</mo></mtd></mtr><mtr><mtd columnalign="left" style="text-align: left"></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">
\vec{\nabla} f(h_i) = \sum_{j=1}^N
\begin{cases}
\vec{0} &amp; F_i \cap F_j = \emptyset \text{ and } O_{ij} = 0\\
\vec{0} &amp; (F_i \subseteq F_j \text{ or } F_i \supseteq F_j) \text{ and } O_{ij}=0\\
4\left(h_i-h_j\right)\left(\left(h_i-h_j\right)^2+\left(k_i-k_j\right)^2-d_{ij}^2\right) &amp; \text{otherwise}, \\
\end{cases}
</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>‚àá</mi><mo accent="true">‚Üí</mo></mover><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>k</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\vec{\nabla} f(k_i)</annotation></semantics></math>
is found as in the gradient with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>h</mi><mi>i</mi></msub><annotation encoding="application/x-tex">h_i</annotation></semantics></math>
swapped for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mi>i</mi></msub><annotation encoding="application/x-tex">k_i</annotation></semantics></math>
(and vice versa).</p>
<p>The Hessian for our loss function is given next. However, because the
current release of R suffers from a bug<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The current development version of R features a fix for
this bug; &lt;strong&gt;eulerr&lt;/strong&gt; will be updated to use the analytical
Hessian as soon as it is introduced in a stable version of R.&lt;/p&gt;"><sup>2</sup></a> causing the analytical
Hessian to be updated improperly, the current release of
<strong>eulerr</strong> instead relies on the numerical approximation of
the Hessian offered by the optimizer.</p>
<p><span class="math display">$$
\small
\mathbf{H}(h,k) = \ell{\sum_{1\leq i&lt;j\leq N}}
\begin{bmatrix}
4\left(\left(h_i-h_j\right)^2+\left(k_i-k_j\right)^2-d_{ij}^2\right)+8\left(h_i-h_j\right)^2
&amp;
\cdots &amp;
8\left(h_i-h_j\right)\left(k_i-k_j\right)\\
\vdots &amp; \ddots &amp; \vdots \\
8\left(k_i-k_j\right)\left(h_i-h_j\right) &amp;
\cdots &amp;
4\left(\left(h_i-h_j\right)^2+\left(k_i-k_j\right)^2-d_{ij}^2\right)+8\left(k_i-k_j\right)^2
\end{bmatrix}.
$$</span></p>
<p>Note that the constraints given in loss and gradients still apply to
each element of the Hessian and have been omitted for convenience
only.</p>
<p>We optimize the loss function using the nonlinear optimizer
<code><a href="https://rdrr.io/r/stats/nlm.html" class="external-link">nlm()</a></code> from the R core package <strong>stats</strong>. The
underlying code for <code>nlm</code> was written by <span class="citation">Schnabel, Koonatz, and Weiss (1985)</span>. It was
ported to R by Saikat DebRoy and the R Core team <span class="citation">(R Core Team 2017)</span> from a previous FORTRAN to C
translation by Richard H. Jones. <code><a href="https://rdrr.io/r/stats/nlm.html" class="external-link">nlm()</a></code> consists of a system
of Newton-type algorithms and performs well for difficult problems <span class="citation">(Nash 2014)</span>.</p>
<p>The initial layout outlined above will sometimes turn up perfect
diagrams, but only reliably so when the diagram is completely determined
by its pairwise intersections. More pertinently, we have not yet
considered the higher-order intersections in our algorithm and neither
have we approached the problem of using ellipses‚Äîas we set out to
do.</p>
</div>
<div class="section level2">
<h2 id="final-layout">Final layout<a class="anchor" aria-label="anchor" href="#final-layout"></a>
</h2>
<p>We now need to account for all the sets‚Äô intersections and,
consequently, all the overlaps in the diagram. The goal is to map each
area uniquely to a subset of the data from the input and for this
purpose we will use the sets‚Äô intersections and the relative complements
of these intersections, for which we will use the shorthand
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>œâ</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math>.
We introduced this form in the <em>input</em> section, but now define it
rigorously.</p>
<p>For a family of <em>N</em> sets,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><msub><mi>F</mi><mn>1</mn></msub><mo>,</mo><msub><mi>F</mi><mn>2</mn></msub><mo>,</mo><mi>‚Ä¶</mi><mo>,</mo><msub><mi>F</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">F = F_1, F_2, \dots, F_N</annotation></semantics></math>,
and their
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><msup><mn>2</mn><mi>N</mi></msup><mo>‚àí</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n=2^N-1</annotation></semantics></math>
intersections, we define
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>œâ</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math>
as the intersections of these sets and their relative complements, such
that</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>œâ</mi><mn>1</mn></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><msub><mi>F</mi><mn>1</mn></msub><mo>\</mo><munderover><mo>‚ãÇ</mo><mrow><mi>i</mi><mo>=</mo><mn>2</mn></mrow><mi>N</mi></munderover><msub><mi>F</mi><mi>i</mi></msub></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>œâ</mi><mn>2</mn></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><munderover><mo>‚ãÇ</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>2</mn></munderover><msub><mi>F</mi><mi>i</mi></msub><mo>\</mo><munderover><mo>‚ãÇ</mo><mrow><mi>i</mi><mo>=</mo><mn>3</mn></mrow><mi>N</mi></munderover><msub><mi>F</mi><mi>i</mi></msub></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mi>‚ãÆ</mi></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><mi>‚ãÆ</mi></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>œâ</mi><mi>n</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><munderover><mo>‚ãÇ</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>F</mi><mi>i</mi></msub></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
\omega_{1} &amp; = F_1 \setminus \bigcap_{i=2}^N F_i  \\
\omega_{2} &amp; = \bigcap_{i=1}^2 F_i \setminus \bigcap_{i=3}^{N} F_i\\
\vdots    &amp; = \vdots \\
\omega_n &amp; = \bigcap_{i=1}^{N}F_i
\end{aligned}
</annotation></semantics></math></p>
<p>with</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>‚àë</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>œâ</mi><mi>i</mi></msub><mo>=</mo><munderover><mo>‚ãÉ</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>F</mi><mi>i</mi></msub><mi>.</mi></mrow><annotation encoding="application/x-tex">
\sum_{i = 1}^n \omega_i =  \bigcup_{j=1}^N F_i.
</annotation></semantics></math></p>
<p>Analogously to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>œâ</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math>,
we also introduce the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>&amp;</mi><annotation encoding="application/x-tex">\&amp;</annotation></semantics></math>-operator,
such that</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>i</mi></msub><mi>&amp;</mi><msub><mi>F</mi><mi>j</mi></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>F</mi><mi>i</mi></msub><mo>‚à©</mo><msub><mi>F</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>\</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>F</mi><mi>i</mi></msub><mo>‚à©</mo><msub><mi>F</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mtext mathvariant="sans-serif">ùñº</mtext></msup><mi>.</mi></mrow><annotation encoding="application/x-tex">
F_i \&amp; F_j = (F_i \cap F_j)\setminus (F_i \cap F_j)^\textsf{c}.
</annotation></semantics></math></p>
<p>The fitted diagram‚Äôs area-equivalents for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>œâ</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math>
will be defined as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>,
so that an exact diagram requires that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>œâ</mi><mi>i</mi></msub><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\omega_i = A_i</annotation></semantics></math>
for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mi>‚Ä¶</mi><mo>,</mo><msup><mn>2</mn><mi>N</mi></msup><mo>‚àí</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i=1,2,\dots,2^N-1</annotation></semantics></math>,
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>
is the number of sets in the input.</p>
<p>In our initial configuration, we restricted ourselves to circles but
now extend ourselves also to ellipses. From now on, we abandon the
practice of treating circles separately‚Äîthey are only a special case of
ellipses, and, hence, everything that applies to an ellipse does so
equally for a circle.</p>
<div class="section level3">
<h3 id="intersecting-ellipses">Intersecting ellipses<a class="anchor" aria-label="anchor" href="#intersecting-ellipses"></a>
</h3>
<p>We now need the ellipses‚Äô points of intersections.
<strong>eulerr</strong>‚Äôs approach to this is outlined in <span class="citation">(Richter-Gebert 2011)</span> and based in
<em>projective</em>, as opposed to <em>Euclidean</em>, geometry.</p>
<p>To collect all the intersection points, we naturally need only to
consider two ellipses at a time. The canonical form of an ellipse is
given by</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msup><mrow><mo stretchy="true" form="prefix">[</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo>‚àí</mo><mi>h</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>cos</mo><mi>œï</mi><mo>+</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo>‚àí</mo><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>sin</mo><mi>œï</mi><mo stretchy="true" form="postfix">]</mo></mrow><mn>2</mn></msup><msup><mi>a</mi><mn>2</mn></msup></mfrac><mo>+</mo><mfrac><msup><mrow><mo stretchy="true" form="prefix">[</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo>‚àí</mo><mi>h</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>sin</mo><mi>œï</mi><mo>‚àí</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo>‚àí</mo><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>cos</mo><mi>œï</mi><mo stretchy="true" form="postfix">]</mo></mrow><mn>2</mn></msup><msup><mi>b</mi><mn>2</mn></msup></mfrac><mo>=</mo><mn>1</mn><mo>,</mo></mrow><annotation encoding="application/x-tex">
\frac{\left[ (x-h)\cos{\phi}+(y-k)\sin{\phi} \right]^2}{a^2}+
\frac{\left[(x-h) \sin{\phi}-(y-k) \cos{\phi}\right]^2}{b^2} = 1,
</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>œï</mi><annotation encoding="application/x-tex">\phi</annotation></semantics></math>
is the counter-clockwise angle from the positive x-axis to the
semi-major axis
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>a</mi><annotation encoding="application/x-tex">a</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>b</mi><annotation encoding="application/x-tex">b</annotation></semantics></math>
is the semi-minor axis, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>,</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">h, k</annotation></semantics></math>
are the x- and y-coordinates, respectively, of ellipse‚Äôs center.</p>
<div class="figure">
<img src="under-the-hood_files/figure-html/unnamed-chunk-2-1.png" alt="A rotated ellipse with semimajor axis $a$, semiminor axis $b$, rotation $\phi$, and center $h,k$." width="288"><p class="caption">
A rotated ellipse with semimajor axis
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>a</mi><annotation encoding="application/x-tex">a</annotation></semantics></math>,
semiminor axis
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>b</mi><annotation encoding="application/x-tex">b</annotation></semantics></math>,
rotation
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>œï</mi><annotation encoding="application/x-tex">\phi</annotation></semantics></math>,
and center
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>,</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">h,k</annotation></semantics></math>.
</p>
</div>
<p>However, because an ellipse is a conic<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The circle, parabola, and hyperbola are the other types
of conics.&lt;/p&gt;"><sup>3</sup></a> it can be represented
in quadric form,</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>B</mi><mi>x</mi><mi>y</mi><mo>+</mo><mi>C</mi><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><mi>D</mi><mi>x</mi><mo>+</mo><mi>E</mi><mi>y</mi><mo>+</mo><mi>F</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">
Ax^2 + Bxy + Cy^2 + Dx + Ey + F = 0
</annotation></semantics></math></p>
<p>that in turn can be represented as a matrix,</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mi>A</mi></mtd><mtd columnalign="center" style="text-align: center"><mi>B</mi><mi>/</mi><mn>2</mn></mtd><mtd columnalign="center" style="text-align: center"><mi>D</mi><mi>/</mi><mn>2</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mi>B</mi><mi>/</mi><mn>2</mn></mtd><mtd columnalign="center" style="text-align: center"><mi>C</mi></mtd><mtd columnalign="center" style="text-align: center"><mi>E</mi><mi>/</mi><mn>2</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mi>D</mi><mi>/</mi><mn>2</mn></mtd><mtd columnalign="center" style="text-align: center"><mi>E</mi><mi>/</mi><mn>2</mn></mtd><mtd columnalign="center" style="text-align: center"><mi>F</mi></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
A   &amp; B/2 &amp; D/2 \\
B/2 &amp; C   &amp; E/2 \\
D/2 &amp; E/2 &amp; F
\end{bmatrix},
</annotation></semantics></math></p>
<p>which is the form we need to intersect our ellipses. We now proceed
to form three degenerate conics from a linear combination of the two
ellipses we wish to intersect, split one of these degenerate conics into
two lines, and intersect one of the ellipses with these lines, yielding
0 to 4 intersection points points.</p>
<div class="figure">
<img src="under-the-hood_files/figure-html/intersect-1-1.png" alt="The process used to intersect two ellipses, here yielding four points. This figure was inspired by an example from Richter--Gebert 2011." width="192"><img src="under-the-hood_files/figure-html/intersect-1-2.png" alt="The process used to intersect two ellipses, here yielding four points. This figure was inspired by an example from Richter--Gebert 2011." width="192"><img src="under-the-hood_files/figure-html/intersect-1-3.png" alt="The process used to intersect two ellipses, here yielding four points. This figure was inspired by an example from Richter--Gebert 2011." width="192"><p class="caption">
The process used to intersect two ellipses, here yielding four points.
This figure was inspired by an example from Richter‚ÄìGebert 2011.
</p>
</div>
</div>
<div class="section level3">
<h3 id="overlap-areas">Overlap areas<a class="anchor" aria-label="anchor" href="#overlap-areas"></a>
</h3>
<p>Using the intersection points of a set of ellipses that we retrieved
in, we can now find the overlap of these ellipses. We are only
interested in the points that are <em>contained within all of these
ellipses</em>, which together form a geometric shape consisting of a
convex polygon, the sides of which are made up of straight lines between
consecutive points, and a set of elliptical arcs‚Äîone for each pair of
points.</p>
<div class="figure">
<img src="under-the-hood_files/figure-html/polyarea-1.png" alt="The overlap area between three ellipses is the sum of a convex polygon (in grey) and 2--3 ellipse segments (in blue)." width="288"><p class="caption">
The overlap area between three ellipses is the sum of a convex polygon
(in grey) and 2‚Äì3 ellipse segments (in blue).
</p>
</div>
<p>We continue by ordering the points around their centroid. It is then
trivial to find the area of the polygon section since it is always
convex. Now, because each elliptical segment is formed from the arcs
that connect successive points, we can establish the segments‚Äô areas
algorithmically <span class="citation">(Eberly 2016)</span>. For each
ellipse and its related pair of points (located at angles
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Œ∏</mi><mn>0</mn></msub><annotation encoding="application/x-tex">\theta_0</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Œ∏</mi><mn>1</mn></msub><annotation encoding="application/x-tex">\theta_1</annotation></semantics></math>
from the semimajor axis), we proceed to find its area by</p>
<ol style="list-style-type: decimal">
<li>centering the ellipse at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>0</mn><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(0, 0)</annotation></semantics></math>,</li>
<li>normalizing its rotation, which is not needed to compute the
area,</li>
<li>integrating the ellipse over
[<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>,</mo><msub><mi>Œ∏</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">0,\theta_0</annotation></semantics></math>]
and
[<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>,</mo><msub><mi>Œ∏</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">0,\theta_1</annotation></semantics></math>],
producing elliptical sectors
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Œ∏</mi><mn>0</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">F(\theta_0)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Œ∏</mi><mn>1</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">F(\theta_1)</annotation></semantics></math>,</li>
<li>subtracting the smaller
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false" form="prefix">(</mo><msub><mi>Œ∏</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">F(\theta_0</annotation></semantics></math>))
of these sectors from the larger
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false" form="prefix">(</mo><msub><mi>Œ∏</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">F(\theta_0</annotation></semantics></math>),
and</li>
<li>subtracting the triangle section to finally find the segment area,
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Œ∏</mi><mn>1</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>‚àí</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Œ∏</mi><mn>0</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>‚àí</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mrow><mo stretchy="true" form="prefix">|</mo><msub><mi>x</mi><mn>1</mn></msub><msub><mi>y</mi><mn>0</mn></msub><mo>‚àí</mo><msub><mi>x</mi><mn>0</mn></msub><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="true" form="postfix">|</mo></mrow><mo>,</mo></mrow><annotation encoding="application/x-tex">
F(\theta_1) - F(\theta_0) - \frac{1}{2}\left|x_1y_0 - x_0y_1\right|,
</annotation></semantics></math> where
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>Œ∏</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mi>a</mi><mi>b</mi></mfrac><mrow><mo stretchy="true" form="prefix">[</mo><mi>Œ∏</mi><mo>‚àí</mo><mo>arctan</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mi>b</mi><mo>‚àí</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>sin</mo><mrow><mn>2</mn><mi>Œ∏</mi></mrow></mrow><mrow><mi>b</mi><mo>+</mo><mi>a</mi><mo>+</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>b</mi><mo>‚àí</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>cos</mo><mrow><mn>2</mn><mi>Œ∏</mi></mrow></mrow></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mi>.</mi></mrow><annotation encoding="application/x-tex">
F(\theta) = \frac{a}{b}\left[ \theta - \arctan{\left(\frac{(b - a)\sin{2\theta}}{b + a +(b - a )\cos{2\theta}} \right)}\right].
</annotation></semantics></math>
</li>
</ol>
<p>This procedure is illustrated in the following figure. Note that
there are situations where this algorithm is altered, such that when the
sector angle ranges beyond
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>œÄ</mi><annotation encoding="application/x-tex">\pi</annotation></semantics></math>‚Äîwe
refer the interested reader to <span class="citation">Eberly
(2016)</span>.</p>
<div class="figure">
<img src="under-the-hood_files/figure-html/ellipsesegment-1.png" alt="The elliptical segment in blue is found by first subtracting the elliptical sector from $(a, 0)$ to $\theta_0$ from the one from $(a, 0)$ to $\theta_1$ and then subtracting the triangle part (in grey)." width="288"><p class="caption">
The elliptical segment in blue is found by first subtracting the
elliptical sector from
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo>,</mo><mn>0</mn><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a, 0)</annotation></semantics></math>
to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Œ∏</mi><mn>0</mn></msub><annotation encoding="application/x-tex">\theta_0</annotation></semantics></math>
from the one from
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo>,</mo><mn>0</mn><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(a, 0)</annotation></semantics></math>
to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Œ∏</mi><mn>1</mn></msub><annotation encoding="application/x-tex">\theta_1</annotation></semantics></math>
and then subtracting the triangle part (in grey).
</p>
</div>
<p>Finally, the area of the overlap is then obtained by adding the area
of the polygon and all the elliptical arcs together.</p>
<p>Note that this does not yet give us the areas that we require, namely
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>:
the area-equivalents to the set intersections and relative complements
from our definition of the intersections. For this, we must decompose
the overlap areas so that each area maps uniquely to a subspace of the
set configuration. This, however, is simply a matter of transversing
down the hierarchy of overlaps and subtracting the higher-order overlaps
from the lower-order ones. For a three-set relationship of sets
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>B</mi><annotation encoding="application/x-tex">B</annotation></semantics></math>,
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>C</mi><annotation encoding="application/x-tex">C</annotation></semantics></math>,
for instance, this means subtracting the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>‚à©</mo><mi>B</mi><mo>‚à©</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">A\cap B \cap C</annotation></semantics></math>
overlap from the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>‚à©</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A \cap B</annotation></semantics></math>
one to retrieve the equivalent of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mi>A</mi><mo>‚à©</mo><mi>B</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>\</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">(A \cap B) \setminus C</annotation></semantics></math>.</p>
<p>The exact algorithm may in rare instances<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;1 out of approximately 7000 in our simulations.&lt;/p&gt;"><sup>4</sup></a>, break down, the
culprit being numerical precision issues that occur when ellipses are
tangent or completely overlap. In these cases, the algorithm will
approximate the area of the involved overlap by</p>
<ol style="list-style-type: decimal">
<li>spreading points across the ellipses using Vogel‚Äôs method.</li>
<li>identifying the points that are inside the intersection via the
inequality
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"></mtd><mtd columnalign="left" style="text-align: left"><mfrac><msup><mrow><mo stretchy="true" form="prefix">[</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo>‚àí</mo><mi>h</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>cos</mo><mi>œï</mi><mo>+</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo>‚àí</mo><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>sin</mo><mi>œï</mi><mo stretchy="true" form="postfix">]</mo></mrow><mn>2</mn></msup><msup><mi>a</mi><mn>2</mn></msup></mfrac><mo>+</mo></mtd><mtd columnalign="right" style="text-align: right"><mspace width="1.0em"></mspace><mfrac><msup><mrow><mo stretchy="true" form="prefix">[</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo>‚àí</mo><mi>h</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>sin</mo><mi>œï</mi><mo>‚àí</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo>‚àí</mo><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>cos</mo><mi>œï</mi><mo stretchy="true" form="postfix">]</mo></mrow><mn>2</mn></msup><msup><mi>b</mi><mn>2</mn></msup></mfrac><mo>&lt;</mo><mn>1</mn><mo>,</mo></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
&amp;\frac{\left[(x-h)\cos{\phi}+(y-k)\sin{\phi} \right]^2}{a^2} + 
&amp;\quad \frac{\left[(x-h) \sin{\phi}-(y-k)\cos{\phi}\right]^2}{b^2} &lt; 1,
\end{aligned}
</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>y</mi><annotation encoding="application/x-tex">y</annotation></semantics></math>
are the coordinates of the sampled points, and finally</li>
<li>approximating the area by multiplying the proportion of points
inside the overlap with the area of the ellipse.</li>
</ol>
<p>With this in place, we are now able to compute the areas of all
intersections and their relative complements,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>œâ</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math>,
up to numerical precision.</p>
</div>
<div class="section level3">
<h3 id="final-optimization">Final optimization<a class="anchor" aria-label="anchor" href="#final-optimization"></a>
</h3>
<p>We feed the initial layout to the optimizer‚Äîonce again we employ
<code><a href="https://rdrr.io/r/stats/nlm.html" class="external-link">nlm()</a></code> from <strong>stats</strong> but now also provide the
option to use ellipses rather than circles, allowing the ‚Äúcircles‚Äù to
rotate and the relation between the semiaxes to vary, altogether
rendering five parameters to optimize per set and ellipse (or three if
we restrict ourselves to circles). For each iteration of the optimizer,
the areas of all intersections are analyzed and a measure of loss
returned. The loss we use is the same as in <strong>venneuler</strong>
<span class="citation">(Frederickson 2016)</span>, namely the residual
sums of squares.</p>
<p>If the fitted diagram is still inexact after the procedure, we offer
a final step in which we pass the parameters on to a last-ditch
optimizer. The weapon of choice<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;We conducted thorough benchmarking, that we opt not to
report here, to decide upon an algorithm for this step.&lt;/p&gt;"><sup>5</sup></a> is <em>stress</em> <span class="citation">(Wilkinson 2012)</span>, which is also the loss metric
we use in our final optimization step and is used in
<strong>venneuler</strong>, as well as <em>diagError</em> <span class="citation">(Micallef and Rodgers 2014)</span>, which is used by
<strong>eulerAPE</strong>.</p>
<p>The stress metric is not easily grasped but can be transformed into a
rough analogue of the correlation coefficient via
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><msqrt><mrow><mn>1</mn><mo>‚àí</mo><msup><mtext mathvariant="normal">stress</mtext><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">r = \sqrt{1-\text{stress}^2}</annotation></semantics></math>.</p>
<p>diagError, meanwhile, is given by</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munder><mo>max</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mi>‚Ä¶</mi><mo>,</mo><mi>n</mi></mrow></munder><mrow><mo stretchy="true" form="prefix">|</mo><mfrac><msub><mi>œâ</mi><mi>i</mi></msub><mrow><munderover><mo>‚àë</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>œâ</mi><mi>i</mi></msub></mrow></mfrac><mo>‚àí</mo><mfrac><msub><mi>A</mi><mi>i</mi></msub><mrow><munderover><mo>‚àë</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>A</mi><mi>i</mi></msub></mrow></mfrac><mo stretchy="true" form="postfix">|</mo></mrow><mo>,</mo></mrow><annotation encoding="application/x-tex">
{\max_{i = 1, 2, \dots, n}}\left|
\frac{\omega_i}{\sum_{i=1}^n \omega_i} - \frac{A_i}{\sum_{i=1}^n A_i} \right|,
</annotation></semantics></math></p>
<p>which is the maximum <em>absolute</em> difference of the proportion
of any
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>œâ</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math>
to the respective unique area of the diagram.</p>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Eberly_2016" class="csl-entry">
Eberly, David. 2016. <span>‚ÄúThe Area of Intersecting Ellipses.‚Äù</span>
<em>Geometric Tools</em>. <a href="https://www.geometrictools.com/Documentation/AreaIntersectingEllipses.pdf" class="external-link">https://www.geometrictools.com/Documentation/AreaIntersectingEllipses.pdf</a>.
</div>
<div id="ref-Frederickson_2015" class="csl-entry">
Frederickson, Ben. 2015. <span>‚ÄúVenn <span>Diagrams</span> with
<span>D3</span>.js.‚Äù</span>
http://www.benfrederickson.com/venn-diagrams-with-d3.js/.
</div>
<div id="ref-Frederickson_2016" class="csl-entry">
‚Äî‚Äî‚Äî. 2016. <span>‚ÄúVenn.js <span>Area</span> Proportional
<span>Venn</span> and <span>Euler</span> Diagrams in
<span>JavaScript</span>.‚Äù</span>
</div>
<div id="ref-Micallef_2014a" class="csl-entry">
Micallef, Luana, and Peter Rodgers. 2014. <span>‚Äú<span class="nocase">eulerAPE</span>: Drawing Area-Proportional
3-<span>Venn</span> Diagrams Using Ellipses.‚Äù</span> <em>PLOS ONE</em> 9
(7): e101717. <a href="https://doi.org/10.1371/journal.pone.0101717" class="external-link">https://doi.org/10.1371/journal.pone.0101717</a>.
</div>
<div id="ref-Nash_2014" class="csl-entry">
Nash, John C. 2014. <em>Nonlinear Parameter Optimization Using
<span>R</span> Tools</em>. 1st ed. Chichester, West Sussex: Wiley.
</div>
<div id="ref-RCT_2017" class="csl-entry">
R Core Team. 2017. <em><span>R</span>: A Language and Environment for
Statistical Computing</em>. Vienna, Austria: R Foundation for
Statistical Computing. <a href="https://www.R-project.org/" class="external-link">https://www.R-project.org/</a>.
</div>
<div id="ref-Richter-Gebert_2011" class="csl-entry">
Richter-Gebert, Jurgen. 2011. <em>Perspectives on Projective Geometry: A
Guided Tour Through Real and Complex Geometry</em>. 1st ed. Berlin,
Germany: Springer.
</div>
<div id="ref-Schnabel_1985" class="csl-entry">
Schnabel, Robert B., John E. Koonatz, and Barry E. Weiss. 1985. <span>‚ÄúA
Modular System of Algorithms for Unconstrained Minimization.‚Äù</span>
<em>ACM Trans Math Softw</em> 11 (4): 419‚Äì40. <a href="https://doi.org/10.1145/6187.6192" class="external-link">https://doi.org/10.1145/6187.6192</a>.
</div>
<div id="ref-wilkinson_exact_2012" class="csl-entry">
Wilkinson, L. 2012. <span>‚ÄúExact and <span>Approximate
Area</span>-<span>Proportional Circular Venn</span> and <span>Euler
Diagrams</span>.‚Äù</span> <em>IEEE Transactions on Visualization and
Computer Graphics</em> 18 (2): 321‚Äì31. <a href="https://doi.org/10.1109/TVCG.2011.56" class="external-link">https://doi.org/10.1109/TVCG.2011.56</a>.
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johan Larsson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
