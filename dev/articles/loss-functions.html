<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>loss-functions â€¢ eulerr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="loss-functions">
<meta property="og:description" content="eulerr">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eulerr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">6.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/gallery.html">A Gallery of Euler and Venn Diagrams</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Introducing eulerr</a>
    </li>
    <li>
      <a href="../articles/loss-functions.html">loss-functions</a>
    </li>
    <li>
      <a href="../articles/under-the-hood.html">eulerr under the hood</a>
    </li>
    <li>
      <a href="../articles/venn-diagrams.html">Venn diagrams with eulerr</a>
    </li>
    <li>
      <a href="../articles/visualization.html">Visualizing Euler diagrams with eulerr</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jolars/eulerr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="loss-functions_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>loss-functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jolars/eulerr/blob/HEAD/vignettes/loss-functions.Rmd" class="external-link"><code>vignettes/loss-functions.Rmd</code></a></small>
      <div class="hidden name"><code>loss-functions.Rmd</code></div>

    </div>

    
    
<p>eulerr features multiples loss functions, which result in different diagrams for many combinations. In this vignette, we visualize the effect of the loss function on an example from an issue <a href="https://github.com/jolars/eulerr/issues/93" class="external-link">posted on the GitHub repository for eulerr</a>.</p>
<p>We list the combinations below, which consists of 5 different sets, <em>agc</em>, <em>camk</em>, <em>cmgc</em>, and <em>tk</em>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"agc"</span>                  <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  <span class="st">"camk"</span>                 <span class="op">=</span> <span class="fl">17</span>,</span>
<span>  <span class="st">"cmgc"</span>                 <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  <span class="st">"tk"</span>                   <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  <span class="st">"tkl"</span>                  <span class="op">=</span> <span class="fl">23</span>,</span>
<span>  <span class="st">"agc&amp;camk"</span>             <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="st">"camk&amp;tk"</span>              <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="st">"tk&amp;tkl"</span>               <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="st">"camk&amp;cmgc&amp;tkl"</span>        <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="st">"camk&amp;tk&amp;tkl"</span>          <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  <span class="st">"agc&amp;camk&amp;tk&amp;tkl"</span>      <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="st">"camk&amp;cmgc&amp;tk&amp;tkl"</span>     <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  <span class="st">"agc&amp;camk&amp;cmgc&amp;tk&amp;tkl"</span> <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Notice that the sizes of most of the intersections are small compared to the size of the sets themselves and that many of the intersections are missing. Generating an exact Euler diagram that shows these intersections and at the same time omits the intersections that are here implicitly 0 is an impossible problem, which means that the best we can do is an approximation.</p>
<p>What kind of approximation we get depends on the loss functions we use. If we use the default, which in <strong>eulerr</strong> is the sums of squared errors, we will almost certainly get a design in which the intersections involving many sets are missing since including them inevitably leads to larger errors from having to include other intersections that are not present.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jolars/eulerr" class="external-link">eulerr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/euler.html">euler</a></span><span class="op">(</span><span class="va">combos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="loss-functions_files/figure-html/unnamed-chunk-3-1.png" alt="An Euler diagram fit to the combination given earlier on, showing that only 1-by-1 intersections are present. This fit uses the default loss function, the sum of squared errors." width="700"><p class="caption">
An Euler diagram fit to the combination given earlier on, showing that only 1-by-1 intersections are present. This fit uses the default loss function, the sum of squared errors.
</p>
</div>
<p>If we rather want a diagram that includes these intersections, despite leading to errors for the zero-intersections, then we need to switch the loss function we use. In <strong>eulerr</strong> there are currently five different loss metrics, which can be provided to the <code>loss</code> argument in <code><a href="../reference/euler.html">euler()</a></code>.</p>
<table class="table">
<caption>Loss functions in <strong>eulerr</strong>
</caption>
<thead><tr class="header">
<th align="left">Loss</th>
<th align="left">Input</th>
<th align="left">Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Sum of squared errors</td>
<td align="left"><code>sum_sq</code></td>
<td align="left"><span class="math inline">\(\sum_i (y_i - \hat y_i)^2\)</span></td>
</tr>
<tr class="even">
<td align="left">Sum of absolute errors</td>
<td align="left"><code>sum_abs</code></td>
<td align="left"><span class="math inline">\(\sum_i |y_i - \hat y_i|\)</span></td>
</tr>
<tr class="odd">
<td align="left">Sum of regionErrors</td>
<td align="left"><code>sum_reg</code></td>
<td align="left"><span class="math inline">\(\sum_i \big|y_i/\sum_k y_k - \hat y_i / \sum_k \hat y_k \big|\)</span></td>
</tr>
<tr class="even">
<td align="left">Maximum squared error</td>
<td align="left"><code>max_sq</code></td>
<td align="left"><span class="math inline">\(\max_i (y_i - \hat y_i)^2\)</span></td>
</tr>
<tr class="odd">
<td align="left">Maximum absolute error</td>
<td align="left"><code>max_sq</code></td>
<td align="left"><span class="math inline">\(\max_i |y_i - \hat y_i|\)</span></td>
</tr>
<tr class="even">
<td align="left">Maximum regionError (diagError)</td>
<td align="left"><code>sum_reg</code></td>
<td align="left"><span class="math inline">\(\sum_i \big|y_i/\sum_k y_k - \hat y_i / \sum_k \hat y_k \big|\)</span></td>
</tr>
</tbody>
</table>
<p>To see what these different choices mean for the combination that we have looked at, we now refit the diagram for each combination.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"sum_sq"</span>,</span>
<span>  <span class="st">"sum_abs"</span>,</span>
<span>  <span class="st">"sum_reg"</span>,</span>
<span>  <span class="st">"max_sq"</span>,</span>
<span>  <span class="st">"max_abs"</span>,</span>
<span>  <span class="st">"max_reg"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">loss</span> <span class="kw">in</span> <span class="va">metrics</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/euler.html">euler</a></span><span class="op">(</span><span class="va">combos</span>, loss <span class="op">=</span> <span class="va">loss</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span>, main <span class="op">=</span> <span class="va">loss</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="figure">
<img src="loss-functions_files/figure-html/unnamed-chunk-4-1.png" alt="Euler diagrams fit to the combination above, using different loss function" width="700"><img src="loss-functions_files/figure-html/unnamed-chunk-4-2.png" alt="Euler diagrams fit to the combination above, using different loss function" width="700"><img src="loss-functions_files/figure-html/unnamed-chunk-4-3.png" alt="Euler diagrams fit to the combination above, using different loss function" width="700"><img src="loss-functions_files/figure-html/unnamed-chunk-4-4.png" alt="Euler diagrams fit to the combination above, using different loss function" width="700"><img src="loss-functions_files/figure-html/unnamed-chunk-4-5.png" alt="Euler diagrams fit to the combination above, using different loss function" width="700"><img src="loss-functions_files/figure-html/unnamed-chunk-4-6.png" alt="Euler diagrams fit to the combination above, using different loss function" width="700"><p class="caption">
Euler diagrams fit to the combination above, using different loss function
</p>
</div>
<p>As you can see, the errors that sum either the absolute or squared errors result in very similar fits and keep the existing two-set intersections and drop everything else. The <code>max_abs</code> and <code>max_sq</code> errors, meanwhile, produce fits that are much more unpredictable since they only care about the largest error. Finally, <code>max/sum_reg</code> results diagrams that tries to include many more intersections.</p>
<p>Feel free to raise a request at <a href="https://github.com/jolars/eulerr/issues" class="external-link uri">https://github.com/jolars/eulerr/issues</a> if you know of any other loss function that you think should be included in the package.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Johan Larsson.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
